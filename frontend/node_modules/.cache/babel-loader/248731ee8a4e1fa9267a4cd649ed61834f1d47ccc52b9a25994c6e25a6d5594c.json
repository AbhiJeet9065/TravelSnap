{"ast":null,"code":"import React,{useState,useContext}from\"react\";import Card from\"../../shared/components/UIElements/Card\";import Button from\"../../shared/components/FormElements/Button\";import Modal from\"../../shared/components/UIElements/Modal\";// import Map from \"../../shared/components/UIElements/Map\";\nimport ErrorModal from\"../../shared/components/UIElements/ErrorModal\";import LoadingSpinner from\"../../shared/components/UIElements/LoadingSpinner\";import{AuthContext}from\"../../shared/context/auth-context\";import{useHttpClient}from\"../../shared/hooks/http-hook\";import\"./PlaceItem.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const PlaceItem=props=>{const{isLoading,error,sendRequest,clearError}=useHttpClient();const auth=useContext(AuthContext);const[showMap,setShowMap]=useState(false);const[showConfirmModal,setShowConfirmModal]=useState(false);const openMapHandler=()=>setShowMap(true);const closeMapHandler=()=>setShowMap(false);const showDeleteWarningHandler=()=>{setShowConfirmModal(true);};const cancelDeleteHandler=()=>{setShowConfirmModal(false);};const confirmDeleteHandler=async()=>{setShowConfirmModal(false);try{await sendRequest(process.env.REACT_APP_BACKEND_URL+\"/places/\".concat(props.id),\"DELETE\",null,{Authorization:\"Bearer \"+auth.token});props.onDelete(props.id);}catch(err){}};return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(ErrorModal,{error:error,onClear:clearError}),/*#__PURE__*/_jsx(Modal,{show:showMap,onCancel:closeMapHandler,header:props.address,contentClass:\"place-item__modal-content\",footerClass:\"place-item__modal-actions\",footer:/*#__PURE__*/_jsx(Button,{onClick:closeMapHandler,children:\"Close\"}),children:/*#__PURE__*/_jsxs(\"div\",{className:\"map-container\",style:{padding:\"5px\"},children:[/*#__PURE__*/_jsx(\"iframe\",{title:\"map\",width:\"100%\",height:\"100%\",frameBorder:\"0\",scrolling:\"no\",marginHeight:\"0\",marginWidth:\"0\",src:\"https://maps.google.com/maps?q=\"+props.coordinates.lat.toString()+\",\"+props.coordinates.lng.toString()+\"&t=&z=15&ie=UTF8&iwloc=&output=embed\"}),/*#__PURE__*/_jsx(\"script\",{type:\"text/javascript\",src:\"https://embedmaps.com/google-maps-authorization/script.js?id=5a33be79e53caf0a07dfec499abf84b7b481f165\"})]})}),/*#__PURE__*/_jsx(Modal,{show:showConfirmModal,cancel:cancelDeleteHandler,header:\"Are you sure?\",footerClass:\"place-item__model-actions\",footer:/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(Button,{inverse:true,onClick:cancelDeleteHandler,children:\"CANCEL\"}),/*#__PURE__*/_jsx(Button,{danger:true,onClick:confirmDeleteHandler,children:\"DELETE\"})]}),children:/*#__PURE__*/_jsx(\"p\",{children:\"Do you want to proceed and delete this place? Please note that it can't be undone thereafter.\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"place-item\",children:/*#__PURE__*/_jsxs(Card,{className:\"place-item__content\",children:[isLoading&&/*#__PURE__*/_jsx(LoadingSpinner,{asOverlay:true}),/*#__PURE__*/_jsx(\"div\",{className:\"place-item__image\",children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(process.env.REACT_APP_ASSET_URL,\"/\").concat(props.image),alt:props.title})}),/*#__PURE__*/_jsxs(\"div\",{className:\"place-item__info\",children:[/*#__PURE__*/_jsx(\"h2\",{children:props.title}),/*#__PURE__*/_jsx(\"h3\",{children:props.address}),/*#__PURE__*/_jsx(\"p\",{children:props.description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"place-item__actions\",children:[/*#__PURE__*/_jsx(Button,{inverse:true,onClick:openMapHandler,children:\"VIEW ON MAP\"}),auth.userId===props.creatorId&&/*#__PURE__*/_jsx(Button,{to:\"/places/\".concat(props.id),children:\"EDIT\"}),auth.userId===props.creatorId&&/*#__PURE__*/_jsx(Button,{danger:true,onClick:showDeleteWarningHandler,children:\"DELETE\"})]})]})})]});};export default PlaceItem;","map":{"version":3,"names":["React","useState","useContext","Card","Button","Modal","ErrorModal","LoadingSpinner","AuthContext","useHttpClient","jsx","_jsx","jsxs","_jsxs","PlaceItem","props","isLoading","error","sendRequest","clearError","auth","showMap","setShowMap","showConfirmModal","setShowConfirmModal","openMapHandler","closeMapHandler","showDeleteWarningHandler","cancelDeleteHandler","confirmDeleteHandler","process","env","REACT_APP_BACKEND_URL","concat","id","Authorization","token","onDelete","err","Fragment","children","onClear","show","onCancel","header","address","contentClass","footerClass","footer","onClick","className","style","padding","title","width","height","frameBorder","scrolling","marginHeight","marginWidth","src","coordinates","lat","toString","lng","type","cancel","inverse","danger","asOverlay","REACT_APP_ASSET_URL","image","alt","description","userId","creatorId","to"],"sources":["C:/Users/HP/Downloads/ReactJS - Udemy/TravelSnap/src/places/components/PlaceItem.js"],"sourcesContent":["import React, { useState, useContext } from \"react\";\r\n\r\nimport Card from \"../../shared/components/UIElements/Card\";\r\nimport Button from \"../../shared/components/FormElements/Button\";\r\nimport Modal from \"../../shared/components/UIElements/Modal\";\r\n// import Map from \"../../shared/components/UIElements/Map\";\r\nimport ErrorModal from \"../../shared/components/UIElements/ErrorModal\";\r\nimport LoadingSpinner from \"../../shared/components/UIElements/LoadingSpinner\";\r\nimport { AuthContext } from \"../../shared/context/auth-context\";\r\nimport { useHttpClient } from \"../../shared/hooks/http-hook\";\r\nimport \"./PlaceItem.css\";\r\n\r\nconst PlaceItem = (props) => {\r\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\r\n  const auth = useContext(AuthContext);\r\n  const [showMap, setShowMap] = useState(false);\r\n  const [showConfirmModal, setShowConfirmModal] = useState(false);\r\n\r\n  const openMapHandler = () => setShowMap(true);\r\n\r\n  const closeMapHandler = () => setShowMap(false);\r\n\r\n  const showDeleteWarningHandler = () => {\r\n    setShowConfirmModal(true);\r\n  };\r\n\r\n  const cancelDeleteHandler = () => {\r\n    setShowConfirmModal(false);\r\n  };\r\n\r\n  const confirmDeleteHandler = async () => {\r\n    setShowConfirmModal(false);\r\n    try {\r\n      await sendRequest(\r\n        process.env.REACT_APP_BACKEND_URL + `/places/${props.id}`,\r\n        \"DELETE\",\r\n        null,\r\n        {\r\n          Authorization: \"Bearer \" + auth.token,\r\n        }\r\n      );\r\n      props.onDelete(props.id);\r\n    } catch (err) {}\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <ErrorModal error={error} onClear={clearError} />\r\n      <Modal\r\n        show={showMap}\r\n        onCancel={closeMapHandler}\r\n        header={props.address}\r\n        contentClass=\"place-item__modal-content\"\r\n        footerClass=\"place-item__modal-actions\"\r\n        footer={<Button onClick={closeMapHandler}>Close</Button>}\r\n      >\r\n        {/* <div className=\"map-container\">\r\n            <Map center={props.coordinates} zoom={16} />\r\n        </div> */}\r\n\r\n        <div className=\"map-container\" style={{ padding: \"5px\" }}>\r\n          <iframe\r\n            title=\"map\"\r\n            width=\"100%\"\r\n            height=\"100%\"\r\n            frameBorder=\"0\"\r\n            scrolling=\"no\"\r\n            marginHeight=\"0\"\r\n            marginWidth=\"0\"\r\n            src={\r\n              \"https://maps.google.com/maps?q=\" +\r\n              props.coordinates.lat.toString() +\r\n              \",\" +\r\n              props.coordinates.lng.toString() +\r\n              \"&t=&z=15&ie=UTF8&iwloc=&output=embed\"\r\n            }\r\n          ></iframe>\r\n          <script\r\n            type=\"text/javascript\"\r\n            src=\"https://embedmaps.com/google-maps-authorization/script.js?id=5a33be79e53caf0a07dfec499abf84b7b481f165\"\r\n          ></script>\r\n        </div>\r\n      </Modal>\r\n      <Modal\r\n        show={showConfirmModal}\r\n        cancel={cancelDeleteHandler}\r\n        header=\"Are you sure?\"\r\n        footerClass=\"place-item__model-actions\"\r\n        footer={\r\n          <React.Fragment>\r\n            <Button inverse onClick={cancelDeleteHandler}>\r\n              CANCEL\r\n            </Button>\r\n            <Button danger onClick={confirmDeleteHandler}>\r\n              DELETE\r\n            </Button>\r\n          </React.Fragment>\r\n        }\r\n      >\r\n        <p>\r\n          Do you want to proceed and delete this place? Please note that it\r\n          can't be undone thereafter.\r\n        </p>\r\n      </Modal>\r\n      <li className=\"place-item\">\r\n        <Card className=\"place-item__content\">\r\n          {isLoading && <LoadingSpinner asOverlay />}\r\n          <div className=\"place-item__image\">\r\n            <img\r\n              src={`${process.env.REACT_APP_ASSET_URL}/${props.image}`}\r\n              alt={props.title}\r\n            />\r\n          </div>\r\n          <div className=\"place-item__info\">\r\n            <h2>{props.title}</h2>\r\n            <h3>{props.address}</h3>\r\n            <p>{props.description}</p>\r\n          </div>\r\n          <div className=\"place-item__actions\">\r\n            <Button inverse onClick={openMapHandler}>\r\n              VIEW ON MAP\r\n            </Button>\r\n            {auth.userId === props.creatorId && (\r\n              <Button to={`/places/${props.id}`}>EDIT</Button>\r\n            )}\r\n            {auth.userId === props.creatorId && (\r\n              <Button danger onClick={showDeleteWarningHandler}>\r\n                DELETE\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </Card>\r\n      </li>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default PlaceItem;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}